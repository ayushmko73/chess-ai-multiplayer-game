import { Chess, Move } from 'chess.js'; const PIECE_VALUES: Record<string, number> = { p: 10, n: 30, b: 30, r: 50, q: 90, k: 900 }; export const evaluateBoard = (game: Chess): number => { let totalEvaluation = 0; const board = game.board(); for (let i = 0; i < 8; i++) { for (let j = 0; j < 8; j++) { const piece = board[i][j]; if (piece) { const value = PIECE_VALUES[piece.type] || 0; totalEvaluation += piece.color === 'w' ? value : -value; } } } return totalEvaluation; }; export const minimax = (game: Chess, depth: number, alpha: number, beta: number, isMaximizingPlayer: boolean): number => { if (depth === 0) return -evaluateBoard(game); const moves = game.moves(); if (isMaximizingPlayer) { let bestEval = -Infinity; for (const move of moves) { game.move(move); bestEval = Math.max(bestEval, minimax(game, depth - 1, alpha, beta, !isMaximizingPlayer)); game.undo(); alpha = Math.max(alpha, bestEval); if (beta <= alpha) break; } return bestEval; } else { let bestEval = Infinity; for (const move of moves) { game.move(move); bestEval = Math.min(bestEval, minimax(game, depth - 1, alpha, beta, !isMaximizingPlayer)); game.undo(); beta = Math.min(beta, bestEval); if (beta <= alpha) break; } return bestEval; } }; export const getBestMove = (game: Chess, difficulty: string): string | Move => { const moves = game.moves(); if (difficulty === 'Beginner') return moves[Math.floor(Math.random() * moves.length)]; let bestMove = null; let bestValue = -Infinity; const depthMap: Record<string, number> = { 'Easy': 1, 'Hard': 2, 'Master': 3 }; const depth = depthMap[difficulty] || 2; for (const move of moves) { game.move(move); const boardValue = minimax(game, depth - 1, -Infinity, Infinity, false); game.undo(); if (boardValue > bestValue) { bestValue = boardValue; bestMove = move; } } return bestMove || moves[Math.floor(Math.random() * moves.length)]; };